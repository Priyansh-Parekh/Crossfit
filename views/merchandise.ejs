<!-- Link to Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Link to the specific stylesheet for this page -->
<link rel="stylesheet" href="/css/merch.css">

<main class="merch-container">
    <!-- 1. Page Header Section -->
    

    <!-- 2. Filter Controls Section -->
    <div class="merch-filters">
        <button class="merch-filter-btn active" data-category="all">
            <i class="fas fa-boxes-stacked"></i> All
        </button>
        <button class="merch-filter-btn" data-category="Jersey">
            <i class="fas fa-tshirt"></i> Jerseys
        </button>
        <button class="merch-filter-btn" data-category="Apparel">
            <i class="fas fa-hat-wizard"></i> Apparel
        </button>
        <button class="merch-filter-btn" data-category="Accessories">
            <i class="fas fa-star"></i> Accessories
        </button>
        <button class="merch-filter-btn" data-category="Equipment">
            <i class="fas fa-futbol"></i> Equipment
        </button>
    </div>

    <!-- 3. Product Grid -->
    <div class="merch-grid">
        <% if (merchandise && merchandise.length > 0) { %>
            <% merchandise.forEach(product => { %>
                <!-- The data-category attribute is essential for filtering -->
                <div class="merch-card" data-category="<%= product.category %>">
                    <div class="merch-card__image-wrapper">
                        <img src="<%= product.imageUrl || '/img/default_product.png' %>" class="merch-card__image" alt="<%= product.name %>">
                        
                        <!-- Stock Status Badge -->
                        <% if (product.stock_quantity === 0) { %>
                            <span class="merch-card__badge out-of-stock">Out of Stock</span>
                        <% } else if (product.stock_quantity < 10) { %>
                            <span class="merch-card__badge low-stock">Low Stock</span>
                        <% } %>
                    </div>
                    <div class="merch-card__body">
                        <span class="merch-card__category"><%= product.category %></span>
                        <h5 class="merch-card__title"><%= product.name %></h5>
                        <p class="merch-card__description"><%= product.description.substring(0, 80) %>...</p>
                    </div>
                    <div class="merch-card__footer">
                        <strong class="merch-card__price">â‚¹<%= product.price.toFixed(2) %></strong>
                        
                        <% if (user) { %>
                            <!-- Disable button if out of stock -->
                            <button
                                class="btn btn-primary add-to-cart-btn" 
                                data-id="<%= product._id %>"
                                <%= product.stock_quantity === 0 ? 'disabled' : '' %>>
                                <i class="fas fa-shopping-cart"></i> 
                                <%= product.stock_quantity === 0 ? 'Unavailable' : 'Add to Cart' %>
                            </button>
                        <% } else { %>
                            <a href="/login" class="btn btn-secondary">Login to Buy</a>
                        <% } %>
                    </div>
                </div>
            <% }); %>
        <% } else { %>
            <div class="merch-empty-state">
                <i class="fas fa-store-slash"></i>
                <h2>Store Is Empty</h2>
                <p>No products are available right now. Please check back later!</p>
            </div>
        <% } %>
        
        <!-- Message to show if no products match the filter -->
        <div class="merch-no-results" style="display: none;">
            <i class="fas fa-search-minus"></i>
            <h2>No Matches Found</h2>
            <p>No products match the selected category.</p>
        </div>
    </div>
</main>

<!-- Client-side scripts -->
<script src="/script/cart.js"></script>
<script src="/script/merch-filters.js"></script>
```

---

<!-- ### 2. Client-Side JavaScript for Filtering

Create a **new file** in `public/js/` to handle the interactive filtering logic.


```javascript
document.addEventListener('DOMContentLoaded', () => {
    const filterButtons = document.querySelectorAll('.merch-filter-btn');
    const productCards = document.querySelectorAll('.merch-card');
    const noResultsMessage = document.querySelector('.merch-no-results');

    // Handle filter button clicks
    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            const selectedCategory = button.dataset.category;

            // Update active state on buttons
            filterButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            let visibleProducts = 0;

            // Show/hide product cards based on category
            productCards.forEach(card => {
                const cardCategory = card.dataset.category;
                const shouldBeVisible = selectedCategory === 'all' || selectedCategory === cardCategory;

                card.style.display = shouldBeVisible ? 'flex' : 'none';
                
                if (shouldBeVisible) {
                    visibleProducts++;
                }
            });
            
            // Show a message if no products match the filter
            if (noResultsMessage) {
               noResultsMessage.style.display = visibleProducts === 0 ? 'block' : 'none';
            }
        });
    });
}); -->
